<h1>Application Show Page</h1>

<h4>Name: <%= @application.name  %></h4>
<h4>Street Address: <%= @application.street_address  %></h4>
<h4>City: <%= @application.city  %></h4>
<h4>State: <%= @application.state  %></h4>
<h4>Zip Code: <%= @application.zip_code %></h4>
<h4>Description: <%= @application.description %></h4>
<h4>Status: <%= @application.status %></h4>

<% if @application.status != "Pending" %>
  <h4>Add a Pet to this Application:</h4>
  <%= form_with url: "/applications/#{@application.id}", method: :get, local: true do |f| %>
    <%= f.label :pet_name, "Search by Pet Name:" %>
    <%= f.text_field :pet_name %>
    <%= f.submit "Search Pets" %>
  <% end %>

<% if @search_pets %>
  <% @search_pets.each do |pet| %>
    <li><%= pet.name %><br><%= button_to "Adopt #{pet.name}", {controller: :application_pets, pet_id: pet.id, application_id: @application.id, action: :create} %></li>
  <% end %>
<% end %>
<% end %>

<% @application.pets.each do |pet| %>
<div id ="pet-<%= pet.id %>">
  <li> <%= link_to pet.name, pets_path(pet) %></li>
  </div>
<% end %>

<%# update application status to pending %>

  <h4>Why would you make a good pet owner?</h4><hr>

    <%= form_with url: "/applications/#{params[:id]}", method: :patch, local: true do |f| %>
      <%= f.label :description, "Why would you make a good pet owner?" %><br>
      <%= f.text_area :description %><br>
      <%= f.submit "Submit" %>
    <% end %><br><br>

<% if @application.pets.present? %>
<%= button_to "Submit Application", "/applications/#{params[:id]}", method: :patch, params: { status: "Pending"}%>
<% end %>